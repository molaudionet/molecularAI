# MolecularAI Configuration File
# Example configuration for experiments

# Model Configuration
model:
  name: 'fusion'  # Options: 'audio', 'baseline', 'fusion'
  
  # Audio model settings
  audio:
    pretrained_model: 'facebook/wav2vec2-base'
    freeze_encoder: true
    hidden_dims: [256, 128]
    dropout: 0.3
  
  # Descriptor model settings
  descriptors:
    input_dim: 7
    hidden_dims: [64, 32]
    dropout: 0.2
  
  # Fusion settings
  fusion:
    method: 'attention'  # Options: 'attention', 'concat', 'gated'
    attention_heads: 4
    gate_activation: 'sigmoid'
    combined_hidden_dims: [256, 128, 64]
    output_dim: 1

# Featurization Configuration
featurization:
  # Audio featurization
  audio:
    sample_rate: 16000
    duration: 2.0  # seconds
    mapping_method: 'property_based'  # Options: 'property_based', 'bond_based'
    frequency_range: [20, 20000]  # Hz
  
  # Descriptor selection
  descriptors:
    - 'MolWt'
    - 'LogP'
    - 'TPSA'
    - 'NumHDonors'
    - 'NumHAcceptors'
    - 'NumRotatableBonds'
    - 'NumAromaticRings'
  
  # Graph features (optional)
  graph:
    use_graph: false
    atom_features: ['atomic_num', 'degree', 'hybridization']
    bond_features: ['bond_type', 'conjugated', 'in_ring']

# Training Configuration
training:
  # Basic settings
  epochs: 100
  batch_size: 32
  learning_rate: 0.001
  optimizer: 'adam'  # Options: 'adam', 'sgd', 'adamw'
  
  # Learning rate schedule
  lr_schedule:
    use_schedule: true
    scheduler: 'reduce_on_plateau'  # Options: 'reduce_on_plateau', 'cosine', 'step'
    patience: 10
    factor: 0.5
    min_lr: 0.00001
  
  # Regularization
  weight_decay: 0.0001
  gradient_clip: 1.0
  
  # Early stopping
  early_stopping:
    patience: 20
    min_delta: 0.001
    mode: 'max'  # 'max' for AUC, 'min' for loss
  
  # Data augmentation (optional)
  augmentation:
    use_augmentation: false
    smiles_randomization: true
    audio_noise: 0.01

# Dataset Configuration
dataset:
  name: 'tox21'  # Options: 'tox21', 'bbbp', 'esol'
  task: 'classification'  # Options: 'classification', 'regression'
  
  # Data splits
  split:
    train: 0.8
    val: 0.1
    test: 0.1
    random_seed: 42
    stratify: true  # For classification
  
  # Data processing
  processing:
    remove_duplicates: true
    remove_invalid_smiles: true
    standardize_smiles: true
    balance_classes: false  # For imbalanced datasets

# Evaluation Configuration
evaluation:
  metrics:
    classification:
      - 'auc'
      - 'accuracy'
      - 'precision'
      - 'recall'
      - 'f1'
    regression:
      - 'mse'
      - 'rmse'
      - 'mae'
      - 'r2'
  
  # Cross-validation
  cross_validation:
    use_cv: false
    n_folds: 5
    shuffle: true
  
  # Test-time augmentation
  tta:
    use_tta: false
    n_augmentations: 5

# Logging Configuration
logging:
  # Experiment tracking
  use_tensorboard: true
  tensorboard_dir: 'runs/'
  
  # Checkpointing
  checkpoint:
    save_best: true
    save_last: true
    save_every: 10  # epochs
    checkpoint_dir: 'checkpoints/'
  
  # Logging frequency
  log_every: 10  # batches
  print_every: 1  # epochs

# Hardware Configuration
hardware:
  device: 'cuda'  # Options: 'cuda', 'cpu', 'mps' (Mac)
  gpu_id: 0
  num_workers: 4
  pin_memory: true
  use_amp: false  # Automatic Mixed Precision

# Reproducibility
reproducibility:
  seed: 42
  deterministic: true
  benchmark: false

# Experiment Metadata
experiment:
  name: 'tox21_fusion_baseline'
  description: 'Multi-modal fusion on Tox21 dataset'
  tags: ['tox21', 'fusion', 'baseline']
  notes: 'Initial experiment with default hyperparameters'
